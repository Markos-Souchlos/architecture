<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="../public/favicon.ico">
    <link rel="stylesheet" href="../public/css/styles.css" />
    <link rel="stylesheet" href="../public/css/project.css" />
    <title>Domifactus | Projects</title>
</head>
<body>

    <nav aria-label="main-navigation" id="main-nav">
        <ul>
            <li id="li-logo"><a href="/architecture/en/home.html" id="logo"><img src="../public/assets/icons/88d728b9-073a-4b3e-bbb2-1975ab491d05.jpeg" alt="logo" id="logo-img" ></a></li>

            <li><a href="/architecture/en/home.html">HOME</a></li>
            <li><a href="/architecture/en/about.html">ABOUT</a></li>
            <li><a href="/architecture/en/projects.html">PROJECTS</a></li>
            <li><a href="/architecture/en/gallery.html">GALLERY</a></li>
            <li><a href="/architecture/en/contact.html">CONTACT</a></li>
            <li><button class="change-lang"><img src="https://img.icons8.com/fluency/48/usa-circular.png" alt="USA flag" /></button></li>
            <li id="sandwitch"><button><img width="96" height="96" src="https://img.icons8.com/plumpy/96/menu--v5.png" alt="menu--v5"/></button></li>
        </ul>
    </nav>

    <ul id="mobile-nav">
        <li><a href="/architecture/en/home.html">HOME</a></li>
        <li><a href="/architecture/en/about.html">ABOUT</a></li>
        <li><a href="/architecture/en/projects.html">PROJECTS</a></li>
        <li><a href="/architecture/en/gallery.html">GALLERY</a></li>
        <li><a href="/architecture/en/contact.html">CONTACT</a></li>
        <li><button class="change-lang"><img src="https://img.icons8.com/fluency/48/usa-circular.png" alt="USA flag" /></button></li>
    </ul>

    <button id="top" >
        <img src="../public/assets/icons/icons8-top-50.png" alt="go to top" title="Go to top" >
    </button>

    <img class="header-img" src="../public/assets/Buildings/Project_07/Εικόνα_2.jpg" alt="project image">
    
    <main>

        <div id="project-info"></div>
        <button id="read-more" onclick="showText()">READ MORE</button>

        <div id="project-images"></div>
        
    </main>

    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d7318.246304091099!2d24.46007261527198!3d35.36383370041542!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x149b75f5079565bb%3A0xea975fc7db4f05a7!2sdomifactus!5e0!3m2!1sen!2sgr!4v1735421228082!5m2!1sen!2sgr" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>

    <footer>
        <div id="fcontainer">
            <div class="footer-card lg">
                <a href="/architecture/en/home.html"><img src="../public/assets/icons/88d728b9-073a-4b3e-bbb2-1975ab491d05.jpeg" alt="logo" id="footer-logo" ></a>
                <p>Domifactus Architecture Studio creates innovative, sustainable spaces that inspire and endure</p>
            </div>
            <div class="footer-card info">
                <h2>CONTACT</h2>
                <hr />
                <ul>
                    <li><a>28310 57831</a></li>
                    <li><a>693 240 0774</a></li>
                    <li><a>domifactus@yahoo.gr</a></li>
                    <li><a>Euridikis 2, Rethymno</a></li>
                </ul>
            </div>
            <div class="footer-card we-are-open">
                <h2>WE ARE OPEN</h2>
                <hr />
                <p>MON - FRI 8PM-2AM</p>
                <p>SAT, SUN &nbsp; CLOSED</p>
                <a href="/architecture/en/contact.html">CONTACT US</a>
            </div>
        </div>
        <div id="copyright">
            <p>Copyright <span id="year">2024</span> &copy | domifactus | All rights reserved </p>
            <a href="/architecture/en/privacy-policy">Privacy Policy</a>
        </div>
    </footer>




    <script type="module">

        import { underline, increaseNav, sandwitch, resize, goToTop, getYear, changeLanguage } from '../index.js';

        underline(4);
        increaseNav();
        sandwitch();
        resize(); 
        goToTop();
        getYear();
        changeLanguage('gr', 'projects');

    </script>

    <script>

        const files = [3, 9, 8, 10, 5, 5, 10, 5, 3, 3, 5, 5, 3, 5, 6];
        const desc = [
            'Villa Horizon in Elounda, Crete',
            'Apartment Complex in Chania, Crete',
            'Seaside Mansion in Agios Nikolaos, Crete',
            'Luxury Retreat in Margarites, Rethymno',
            'Modern Townhouse in Heraklion, Crete',
            'Penthouse Residence in Hersonissos, Crete',
            'Eco-Friendly Home in Sissi, Lasithi',
            'Beachfront Villa in Platanias, Chania',
            'Historical Residence in Archanes, Heraklion',
            'Mountain Retreat in Anogeia, Rethymno',
            'Coastal Cottage in Bali, Rethymno',
            'Contemporary Loft in Malia, Heraklion',
            'Charming Villa in Agios Georgios, Chania',
            'Spacious Duplex in Kalyves, Chania',
            'Elegant Residence in Pitsidia, Heraklion',
        ];

        const params = new URLSearchParams(window.location.search);
        const key = params.get('key');
        const img = params.get('img');
        const type = params.get('type');
        const infoURL = `../public/assets/Buildings/Project_${key}/info.txt`;
        let imagesHTML = '';

        for (let index = 1; index <= files[key-1]; index++) {
            imagesHTML += `
            <div>
                <img src='../public/assets/Buildings/Project_${key}/Εικόνα_${index}.${type}' alt='project-image' />
            </div>
            `;
            
        }

        function showTrimmedText() {
            fetch(infoURL)
            .then(response => response.text())
            .then(text => {
                const trimmedText = text.split("</section>")[0] + "</section>";
                document.querySelector('#project-info').innerHTML = trimmedText;
            })
            .catch(error => console.error('Error fetching file:', error));

            document.querySelector('main #read-more').textContent = 'READ MORE';
            document.querySelector("main #read-more").setAttribute("onclick", "showText()");
        }

        function showText() {
            fetch(infoURL)
            .then(response => response.text())
            .then(text => {
                document.querySelector('#project-info').innerHTML = text;
            })
            .catch(error => console.error('Error fetching file:', error));

            document.querySelector('main #read-more').textContent = 'READ LESS';
            document.querySelector("main #read-more").setAttribute("onclick", "showTrimmedText()");

        }

        showTrimmedText();
        

        console.log(key, img, type);
        document.querySelector('.header-img').src = `../public/assets/Buildings/Project_${key}/Εικόνα_${img}.${type}`;

        document.querySelector('#project-images').innerHTML = imagesHTML;



    </script>
    
</body>
</html>